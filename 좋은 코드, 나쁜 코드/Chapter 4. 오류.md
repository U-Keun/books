### 4.1 복구 가능성
- 복구 가능한 오류
	- 사용자의 잘못된 입력이나 네트워크 오류, 중요하지 않은 작업 오류 등은 전체 시스템이 작동을 멈추지 않고 적절하게 처리할 수 있도록 설계해야 한다.
- 복구할 수 없는 오류
	- 프로그래밍 오류 때문에 발생할 때가 많다. 이런 오류는 피해를 최소화하고 개발자가 문제를 발견하고 해결할 가능성을 높여야 한다.
	- 신속한 실패(failing fast), 요란한 실패(failing loudly)

여기서 '복구할 수 있는지' 여부는 오류가 발생했을 때 시스템 전체를 멈춰야 하는지 여부로 이해하는 것이 좋을 것 같다. '복구 가능한 오류'는 시스템 전체를 멈출 필요 없이 해결할 수 있는 오류이고, '복구할 수 없는 오류'는 시스템 전체를 멈추고 해결해야하는 오류이다.

특정 코드가 어떤 곳에서 호출되는지 알지 못한다면 그 코드와 관련된 오류를 복구할 수 있는지에 대한 질문에는 답을 할 수 없다. 일반적으로는 호출하는 쪽에서 오류를 복구할 수 있는지 여부를 판단해야 한다. 하지만 호출하는 쪽에서는 그것이 오류임을 인지할 수 있어야 하고, 추가로 그 오류를 복구하기를 바라야 한다. 

프로그래머의 입장에서는 호출하는 쪽에서 인지할 수 있도록 프로그래밍을 해야 한다. 그리고 일반적으로는 다음과 같은 경우에 오류를 복구하기 바란다고 간주해야 한다.
- 함수가 어디서 호출될지 그리고 호출 시 제공되는 값이 어디서 올지 정확한(완전한) 지식이 없다.
- 코드가 미래에 재사용될 가능성이 아주 희박하다. 재사용이 된다면 코드가 어디에서 호출되고 값이 어디서 오는지에 대한 가정이 의미가 없어질 수 있음을 뜻한다.

### 4.2 견고성 vs 실패
오류가 발생할 때, 다음 중 하나를 선택해야 한다.
- 실패. 더 높은 코드 계층이 오류를 처리하게 하거나 전체 프로그램의 작동을 멈추게 한다. 
- 오류를 처리하고 계속 진행한다. -> 견고성

#### 신속하게 실패하라
신속하게 실패하기(failing fast)는 가능한 한 문제의 실제 발생 지점으로부터 가까운 곳에서 오류를 나타내는 것이다. 복구할 수 있는 오류의 경우 호출하는 쪽에서 오류로부터 훌륭하고 안전하게 복구할 수 있는 기회를 최대한으로 제공하고, 복구할 수 없는 오류의 경우 개발자가 문제를 신속하게 파악하고 해결할 수 있는 기회를 최대한 제공한다.

#### 요란하게 실패하라
요란한 실패는 간단히 말하자면 오류가 발생하는데도 불구하고 아무도 모르는 상황을 막고자 하는 것이다. 이를 위한 가장 명백한 방법은 예외를 발생해 프로그램이 중단되게 하는 것이다. 다른 방법은 오류 메시지를 기록하는 것인데 개발자가 얼마나 부지런하게 로그를 확인하는지, 혹은 로그에 방해되는 다른 메시지가 얼마나 있는지에 따라 오류 메시지가 무시될 수도 있다.

일반적으로 소프트웨어를 견고하게 작성하는 것이 좋다. 한 번의 잘못된 요청으로 인해 전체 서버의 동작이 멈추는 것은 바람직하지 않다. 그러나 오류를 알아차리지 못한 채 시스템이 계속 동작하지 않도록 하는 것 또한 중요하기 때문에 코드가 요란하게 실패해야 한다. 이 두 목표는 양립하지 못할 때가 많다.

이것을 위해 프로그래밍 오류가 발견되면 개발자가 이를 알아차릴 수 있도록 프로그래밍 오류를 기록하고 모니터링하는 것이 필요하다. 상세 오류 정보를 기록하여 개발자가 발생한 일을 디버그할 수 있게 해주고, 오류 발생률이 너무 높아지면 개발자에게 알림 메시지를 보내는 것이 이에 해당한다.

오류를 숨길 수도 있지만, 그러지 말자..

### 오류 전달 방법
오류가 발생하면 일반적으로 더 높은 계층으로 오류를 알려야 한다. 오류로부터 복구할 수 없는 경우 이는 일반적으로 프로그램의 훨씬 더 높은 계층에서 실행을 중지하고, 오류를 기록하거나 전체 프로그램의 실행을 종료하는 것을 의미한다. 오류로부터의 복구가 잠재적으로 가능한 경우, 일반적으로 즉시 호출하는 쪽(또는 호출 체인에서 한두 수준 위의 호출자)에 오류를 알려 정상적으로 처리할 수 있도록 해야 한다.
- 명시적 방법 : 코드를 직접 호출한 쪽에서 오류가 발생할 수 있음을 인지할 수밖에 없도록 한다.
- 암시적 방법 : 코드를 호출하는 쪽에 오류를 알리지만, 호출하는 쪽에서 그 오류를 신경쓰지 않아도 된다.

#### 명시적 방법 : 검사 예외



### 호출하는 쪽에서 복구하기를 원할 수도 있는 오류의 전달
- 비검사 예외를 사용해야 한다는 주장
  - 일반적인 주장
    - 대부분의 오류 처리가 코드의 상위 계층에서 이루어질 수 있기 때문에 비검사 예외를 발생시키면 코드 구조를 개선할 수 있다.
    - 검사 예외를 사용하면 그 메서드를 호출하는 모든 코드를 수정하고 그보다 더 위 계층의 코드까지도 수정해야 할 수도 있다.
- 명시적 기법을 사용해야 한다는 주장
  - 일반적인 주장
    - 검사 예외를 사용하면 모든 오류를 매끄럽게 처리할 수 있다.
    - 비검사 예외를 사용하면 특정 오류가 발생할 수 있다는 사실을 완전히 알지 못하기 때문에 실수할 수 있다.
    - 비검사 예외를 사용할 때 문서화에 사용되는 시간도 무시할 수 없다.

#GoodCodeBadCode 