##### 3.2.1 JDBC `try/catch/finally` 코드의 문제점
`try/catch/finally`가 적용된 코드는 기본적으로 복잡하다. 리소스를 사용하는 모든 DAO 코드에 `try/catch/finally`가 적용되어 있다면 수정하기도 힘들고, 오류나 오타를 찾기도 힘들 것이다.

이런 코드를 효과적으로 다루기 위해, 변하지 않지만 많은 곳에서 중복되는 코드를 잘 분리해내야 한다. 
##### 3.2.2 분리와 재사용을 위한 디자인 패턴 적용
기존의 `deleteAll()` 메서드의 코드 일부를 다시 살펴보자.
```java
...
Connection c = null;
PreparedStatement ps = null;

try {
	c = dataSource.getConnection();
	
	ps = c.prepareStatement("delete from users");

	ps.executeUpdate();
} catch (SQLException e) {
	throw e;
} finally {
	if (ps != null) { 
		try {
			ps.close();
		} catch (SQLException e) {}
	}
	if (c != null) { 
		try {
			c.close();
		} catch (SQLException e) {}
	}
}
...
```
이 코드에서 `ps = c.prepareStatement("delete from users");` 부분만 변하는 부분이고, 나머지 부분은 리소스를 사용하는 대부분의 코드에서 비슷한 구조를 가질 것이다.

비슷하게, `add()` 메서드에서도 변하는 부분으로 분류될 수 있는 코드를 찾을 수 있다.
```java
...
ps = c.prepareStatement("insert into users(id, name, password) values(?,?,?)");
ps.setString(1, user.getId());
ps.setString(2, user.getName());
ps.setString(3, user.getPassword());
...
```

변하는 부분을 변하지 않는 코드에서 분리하면, 변하지 않는 부분을 재사용할 수 있는 방법이 있지 않을까?
###### 메서드 추출
`deleteAll()` 메서드에서는 변할 수 있는 부분이 변하지 않는 부분으로 감싸져 있기 때문에 


#TobySpring #Spring 