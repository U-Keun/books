지금까지 만든 테스트 코드에서 `@Before` 메서드가 테스트 메서드 개수만큼 반복되기 때문에 어플리케이션 컨텍스트가 세 번 만들어진다. 만약 빈이 많아지고 복잡해지면 어플리케이션 컨텍스트 생성이 오래 걸릴 수 있다. 어떤 빈은 오브젝트가 생성될 때 자체적인 초기화 작업을 진행하는 경우도 있고, 독자적으로 많은 리소스를 할당하거나 독립적인 스레드를 띄우는 경우도 있다. 이런 경우에는 테스트를 마칠 때마다 어플리케이션 컨텍스트 내의 빈이 할당한 리소스 등을 정리해주지 않으면 문제가 생길 수 있다.

테스트는 가능한 한 독립적으로 매번 새로운 오브젝트를 만들어서 사용하는 것이 원칙이지만, 어플리케이션 컨텍스트처럼 생성에 많은 시간과 자원이 드는 경우에는 테스트 전체가 공유하는 오브젝트를 만들기도 한다. 어플리케이션 컨텍스트는 초기화되고 나면 내부의 상태가 바뀌는 일은 거의 없기 때문에 테스트의 실행 결과에 영향을 미칠 가능성은 낮다. 

JUnit이 매번 테스트 클래스의 오브젝트를 새로 만들기 때문에 어플리케이션 컨텍스트를 다른 곳이 저장해야 한다. JUnit이 지원하는 `@BeforeClass` 정적 메서드를 사용해서 정적 변수에 저장해두고 사용하는 방법이 있지만, 이것보다는 **Spring**이 직접 제공하는 어플리케이션 컨텍스트 테스트 지원 기능을 사용하는 것이 더 좋다. 
##### 2.4.1 테스트를 위한 어플리케이션 컨텍스트 관리


#TobySpring #Spring 