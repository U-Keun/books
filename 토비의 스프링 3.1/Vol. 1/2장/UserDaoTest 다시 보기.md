##### 2.1.1 테스트의 유용성
만든 코드는 어떤 방법으로든 테스트해야 한다. 이전에 만들었던 테스트 코드는 `main()` 메서드를 이용해 `UserDao` 오브젝트의 `add()`, `get()` 메서드를 호출하고, 그 결과를 화면에 출력해서 그 값을 눈으로 확인할 수 있었다.

테스트란 결국 내가 예상하고 의도했던 대로 코드가 정확히 동작하는지를 확인해서, 만든 코드에 대한 확신을 가질 수 있게 해주는 작업이다. 또한 테스트의 결과가 원하는 대로 나오지 않는 경우에는 코드나 설계에 결함이 있음을 알 수 있다. 
##### 2.1.2 `UserDaoTest`의 특징
`UserDaoTest` 코드를 다시 살펴보자.
```java
public class UserDaoTest {
	public static void main(String[] args) throws SQLException {
		ApplicationContext context = new GenericXmlApplicationContext("application.xml");

		UserDao dao = context.getBean("userDao", UserDao.class);

		User user = new User();
		user.setId("user");
		user.setName("백기선");
		user.setPassword("married");

		dao.add(user);
		
		System.out.println(user.getId() + " 등록 성공");
		
		User user2 = dao.get(user.getId());
		System.out.println(user2.getName());
		System.out.println(user2.getPassword());
		
		System.out.println(user2.getId() + " 조회 성공");
	}
}
```
이 테스트 방법에서 주목할 부분은 `main()` 메서드를 이용해 쉽게 테스트 수행을 가능하게 했다는 점과 테스트할 대상인 `UserDao`를 직접 호출해서 사용한다는 점이다.
###### 웹을 통한 DAO 테스트 방법의 문제점
보통 웹 프로그램에서 사용하는 DAO를 테스트할 때는 웹 화면을 통해 값을 입력하고, 기능을 수행하고, 결과를 확인한다. 이 방법은 DAO 뿐만 아니라 서비스 클래스, 컨트롤러, JSP 뷰 등 모든 레이어의 기능을 다 만들고 나서야 테스트가 가능하다는 점이 단점이다. 테스트를 하는 중에 에러가 나거나 테스트가 실패했다면, 어디에서 문제가 발생했는지를 확인하기 힘들다. 왜냐하면, 하나의 테스트를 수행하는 데 참여하는 클래스와 코드가 너무 많기 때문이다.
###### 작은 단위의 테스트
테스트하고자 하는 대상이 명확하다면 그 대상에만 집중해서 테스트하는 것이 바람직하다. 관심사의 분리 개념이 여기에도 적용되어야 한다. 테스트의 관심이 다르다면 테스트할 대상을 분리하고 집중해서 접근해야 한다.

작은 단위의 코드에 대해 테스트를 수행하는 것을 *단위 테스트*[^unit test]라고 한다. '단위'가 무엇인지 그 크기나 범위가 정해져있는 것은 아니지만, 하나의 관심에 집중해서 효율적으로 테스트할 만한 범위라고 보면 된다.

일반적으로 단위는 작을수록 좋다. 단위를 넘어서는 다른 코드들은 신경 쓰지 않고, 참여하지도 않고 테스트가 동작할 수 있으면 좋은 테스트이다.

때로는 웹 사용자 인터페이스부터 시작해서 DB에 이르기까지의 어플리케이션 전 계층이 참여하는 과정을 테스트해야 한다. 각 단위 기능이 잘 동작하더라도 묶어놓으면 안 되는 경우도 종종 발생하기 때문이다.

단위 테스트 없이 위에서 이야기한 긴 테스트를 한다면, 문제가 발생했을 때 문제의 원인을 찾기가 매우 힘들다. 하지만 각 단위별로 테스트를 모두 진행하면서 충분히 검증을 한다면 완벽할 수는 없겠지만 훨씬 능률적일 것이다.

단위 테스트를 하는 이유는 개발자가 설계하고 만든 코드가 원래 의도한 대로 동작하는지를 개발자 스스로 빨리 확인하기 위해서다. 확인의 대상과 조건은 간단하고 명확할수록 좋으므로 작은 단위로 제한해서 테스트하는 것이 편리하다.
###### 자동수행 테스트 코드





#TobySpring #Spring 