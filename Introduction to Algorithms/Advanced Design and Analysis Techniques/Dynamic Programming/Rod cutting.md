동적 프로그래밍을 사용하는 첫 번째 예제 문제는 강철 막대의 어떤 부분을 자를지 결정하는 간단한 문제입니다. 어떤 회사가 긴 강철 막대를 산 뒤, 짧은 막대로 잘라서 판매하는 상황을 가정하겠습니다. 자르는 것에는 비용이 들지 않을 때, 회사는 막대를 어떻게 잘라야 이익을 최대로 얻을 수 있는지 알고 싶어합니다.

먼저 자연수 $i = 1, 2, \dots$에 대해, $p_i$를 길이 $i$ 인 막대의 가격으로 정의합니다. 막대 길이는 항상 정수입니다.

*막대 자르기 문제*는 다음과 같습니다. 길이 $n$짜리 막대와 $i = 1, 2, \dots, n$에 대해 막대 가격 $p_i$ 가 주어졌을 때, 막대를 자르고 팔아서 얻을 수 있는 최대 수익 $r_n$을 구해야 합니다. 여기서 길이 $n$ 짜리 막대의 가격 $p_n$은 충분히 크고, 최적해는 한 번도 자르지 않은 경우가 될 수도 있습니다.

예를 들어, 아래와 같이 길이에 대한 막대의 가격이 주어졌을 때, 길이 $4$인 막대를 길이 $2$인 막대 2개로 잘랐을 때의 수익은 $10$이고, 이것이 길이 $4$인 막대에 대해서는 최대 수익입니다.

| 길이 $i$   | 1   | 2   | 3   | 4   | 5   | 6   | 7   | 8   | 9   | 10  |
| -------- | --- | --- | --- | --- | --- | --- | --- | --- | --- | --- |
| 가격 $p_i$ | 1   | 5   | 8   | 9   | 10  | 17  | 17  | 20  | 24  | 30  |
길이 $n$인 막대기를 자르는 경우의 수는 총 $2^{n - 1}$ 가지입니다.[^1] 막대기를 자르는 경우를 보편적인 덧셈을 이용해서 표현할 것입니다. 예를 들어 길이 $7$인 막대기를 길이 $2$ 짜리 막대 2개, 길이 $3$ 짜리 막대 1개로 나누는 경우를 $7 = 2 + 2 + 3$으로 표현하는 식입니다. $1\le k\le n$ 에 대해,  $k$개의 막대로 자르는 경우를 다음과 같이 쓸 수 있습니다:
$$n = i_1 + i_2 + \cdots i_k.$$
그리고 위의 경우에 대응되는 수익은 다음과 같이 쓸 수 있습니다:
$$r_n = p_{i_1} + p_{i_2} + \cdots + p_{i_k}.$$
위의 테이블에서, $1\le i \le n$에 대해, $r_i$ 값은 다음과 같이 계산될 수 있습니다.
- $r_1 = 1$ : $1 = 1$ (자르지 않는 경우)
- $r_2 = 5$ : $2 = 2$ (자르지 않는 경우)
- $r_3 = 8$ : $3 = 3$ (자르지 않는 경우)
- $r_4 = 10$ : $4 = 2 + 2$
- $r_5 = 13$ : $5 = 2 + 3$
- $r_6 = 17$ : $6 = 6$ (자르지 않는 경우)
- $r_7 = 18$ : $7 = 1 + 6$ 또는 $7 = 2 + 2 + 3$
- $r_8 = 22$ : $8 = 2 + 6$
- $r_9 = 25$ : $9 = 3 + 6$
- $r_{10} = 30$ : $10 = 10$ (자르지 않는 경우)

더 일반적으로, $r_n$을 더 짧은 막대의 최적 수익으로 구성할 수 있습니다:
$$r_n = \max(p_n, r_1 + r_{n - 1}, r_2 + r_{n - 2}, \dots, r_{n - 1} + r_1).$$
위의 식에서 최댓값의 후보 중 $p_n$은 길이 $n$인 막대를 자르지 않고 파는 경우에 해당합니다. 나머지 $n - 1$ 개의 후보들은 같은 조건에 대해 길이 $i$ 인 막대의 최적 수익과 길이 $n - i$ 인 막대의 최적 수익을 합한 값입니다. 이 값들 중 최댓값을 구할 때는 $1\le i< n$에 대해 어떤 $i$ 가 최적의 수익을 얻을 수 있는지 알 수 없기 때문에, 위와 같이 모든 $i$ 에 대해 고려해야 합니다. 

위의 식을 보면 원래 풀고자 했던 크기 $n$에 대한 문제를 풀기 위해, 같은 형태의 더 작은 문제, 즉 더 작은 크기에 대한 문제를 풀어야 합니다. 한 번 자르면 두 조각을 막대 자르기 문제의 독립적인 대상으로 고려할 수 있습니다. 전체 최적해는 두 개의 관련된 하위 문제에 대한 최적해를 포함하며, 이 두 부분 각각에서의 수익을 최대화합니다. 막대 자르기 문제는 *최적 부분 구조*[^optimal substructure]를 가진다고 말합니다. 즉, 문제에 대한 최적해는 독립적으로 해결할 수 있는 관련 하위 문제에 대한 최적해를 포함합니다.

좀 더 간단한, 재귀적 구조를 이용해서 막대 자르기 문제를 접근할 수 있습니다. 먼저 가장 왼쪽에 있는 막대 조각의 길이가 $i$ 인 경우를 생각합니다. 남은 막대의 길이는 $n - i$ 인데, 이 길이로 얻을 수 있는 최적해를 길이 $i$ 인 막대의 가격에 더하는 모든 경우를 생각하면 구하고자 하는 최적해  $r_n$을 구할 수 있습니다. 이것을 식으로 표현하면 다음과 같습니다.
$$r_n = \max_{1\le i\le n}(p_i + r_{n - i}).$$
여기서 $r_0 = 0$으로 가정합니다. 이 식에서는 원래 문제의 최적해를 구하기 위해 (두 개가 아닌) 하나의 하위 문제에 대한 최적해만 필요합니다.
###### 재귀적 하향식(top-down) 구현
아래의 의사 코드는 위의 식을 그대로 구현한 것입니다.
```pseudo

```

- 백준 문제
	- [카드 구매하기](https://www.acmicpc.net/problem/11052)
	- [카드 구매하기 2](https://www.acmicpc.net/problem/16194)
	- 

#Algorithm #DP 

[^1]: 자를 수 있는 부분이 $n - 1$개 있고, 각 부분을 2 가지 경우-자를지 말지-로 독립적으로 계산할 수 있습니다.